(this["webpackJsonpgravity-frontend"]=this["webpackJsonpgravity-frontend"]||[]).push([[7],{138:function(e,t,s){"use strict";s(0);var n=s(13),c=s(135),r=s.n(c),a=s(1);t.a=function(e){var t=e.post;return Object(a.jsxs)("div",{className:"forum-post-header text-theme-gray text-sm mb-2 flex flex-col sm:flex-row sm:items-center z-10",children:[Object(a.jsxs)(n.b,{to:"/r/".concat(t.subreddit.id),className:"flex items-center mr-2 hover:underline",children:[Object(a.jsx)("img",{className:"w-6 h-6 rounded-full mr-1",src:t.subreddit.communityIcon,alt:"Community Icon"}),Object(a.jsx)("span",{className:"font-bold",children:t.subreddit.prefixedName})]}),Object(a.jsxs)("div",{className:"ml-5 sm:ml-0 flex flex-wrap items-center",children:["Posted by",t.user&&t.user.username?Object(a.jsx)(n.b,{to:"/user/".concat(t.user.id),className:"ml-1 hover:underline",children:t.user.prefixedName}):Object(a.jsx)("span",{className:"ml-1 underline",children:"u/[deleted]"}),Object(a.jsx)("div",{className:"mx-2 inline-block w-1 h-1 bg-theme-black rounded-full"}),r()(t.createdAt).fromNow(),t.editedAt&&Object(a.jsx)("span",{className:"ml-1",children:"(edited)"})]})]})}},139:function(e,t,s){"use strict";var n=s(2),c=s.n(n),r=s(6),a=(s(0),s(8)),o=s(14),i=s(13),l=s(50),m=s.n(l),d=s(7),u=s(37),b=s(1);t.a=function(e){var t=e.post,s=e.isPostDetail,n=e.setToEdit,l=Object(a.c)((function(e){return e})),x=l.currentUser,j=l.comments,f=Object(o.g)(),h=Object(a.b)(),O=Object(d.f)(x,t.id,"postsUpvoted"),p=Object(d.e)(x,t.id,"postsDownvoted"),v=function(){var e=Object(r.a)(c.a.mark((function e(){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={title:"Are you sure?",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, go back!",position:"center",icon:"warning",customClass:{confirmButton:"bg-theme-green text-theme-white border border-theme-green rounded-md",cancelButton:"bg-theme-gray, border border-theme-gray rounded-md"}},e.next=3,m.a.fire(s);case 3:if(!e.sent.isConfirmed){e.next=15;break}return e.prev=5,e.next=8,Object(u.b)(h,t.id,x.token);case 8:f.goBack(),m.a.fire({icon:"success",title:"Post deleted Successfully!",showConfirmButton:!1,timer:2e3}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),Object(d.b)(e.t0);case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"forum-post-footer flex items-center justify-between ".concat(s?"mb-5":""),children:[Object(b.jsxs)("div",{className:"flex items-center",children:[x.username?Object(b.jsxs)("div",{className:"mr-2 flex items-center ".concat(O?"text-theme-green":""),children:[Object(b.jsx)("i",{className:"ri-rocket-2-".concat(O?"fill":"line"," cursor-pointer text-lg sm:text-xl z-10"),onClick:function(){Object(d.d)(h,x,t,O,p)}}),Object(b.jsx)("span",{className:"text-xl",children:t.upvotes})]}):Object(b.jsxs)(i.b,{to:"/login",className:"mr-2 flex items-center",children:[Object(b.jsx)("i",{className:"ri-rocket-2-line cursor-pointer text-lg sm:text-xl z-10"}),Object(b.jsx)("span",{className:"text-xl",children:t.upvotes})]}),x.username?Object(b.jsxs)("div",{className:"mr-4 flex items-center ".concat(p?"text-theme-red":""),children:[Object(b.jsx)("i",{className:"ri-rocket-2-".concat(p?"fill":"line"," transform rotate-180 cursor-pointer text-lg sm:text-xl z-10"),onClick:function(){Object(d.c)(h,x,t,O,p)}}),Object(b.jsx)("span",{className:"text-xl",children:t.downvotes})]}):Object(b.jsxs)(i.b,{to:"/login",className:"mr-4 flex items-center",children:[Object(b.jsx)("i",{className:"ri-rocket-2-line transform rotate-180 cursor-pointer text-lg sm:text-xl z-10"}),Object(b.jsx)("span",{className:"text-xl",children:t.downvotes})]}),Object(b.jsxs)("div",{className:"flex items-center cursor-pointer z-10",children:[Object(b.jsx)("i",{className:"ri-chat-1-line mr-1 text-lg sm:text-xl"}),Object(b.jsx)("span",{className:"mr-1",children:s?j.length:t.comments.length}),"comments"]})]}),t.user&&t.user.id===x.id&&s&&Object(b.jsxs)("div",{className:"flex items-center mr-5",children:[Object(b.jsx)("button",{to:"/forums/".concat(t.id,"/edit"),onClick:function(){n(!0)},className:"mr-3",children:Object(b.jsx)("i",{className:"ri-edit-2-line cursor-pointer text-xl z-10 text-theme-blue"})}),Object(b.jsx)("button",{onClick:v,children:Object(b.jsx)("i",{className:"ri-delete-bin-5-line cursor-pointer text-xl z-10 text-theme-red"})})]})]})}},142:function(e,t,s){"use strict";var n=s(0),c=s(13),r=s(137),a=s.n(r),o=s(2),i=s.n(o),l=s(4),m=s(6),d=s(17),u=s(8),b=s(14),x=s(64),j=s(37),f=s(7),h=s(1),O=function(e){var t=e.post,s=e.setPost,c=e.setToEdit,r=Object(n.useState)(t.content),a=Object(d.a)(r,2),o=a[0],O=a[1],p=Object(u.c)((function(e){return e.currentUser})),v=Object(b.i)().id,N=Object(u.b)(),g=function(){var e=Object(m.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,Object(j.c)(N,v,{content:o},p.token);case 3:return s(Object(l.a)(Object(l.a)({},t),{},{content:o})),e.next=6,Object(f.j)("Post updated successfully!");case 6:c(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"mt-5 create-post-container pt-9 max-w-3xl mx-auto mb-5",children:Object(h.jsxs)("form",{onSubmit:g,children:[Object(h.jsx)(x.a,{editorContent:o,setEditorContent:O,isPost:!0}),Object(h.jsxs)("div",{className:"flex items-center mt-5",children:[Object(h.jsx)("button",{type:"submit",className:"px-4 sm:px-5 py-1.5 border-2 border-theme-green rounded-md text-sm sm:text-base hover:bg-theme-green hover:text-theme-white",children:"Update"}),Object(h.jsx)("button",{type:"button",className:"ml-4 px-4 sm:px-5 py-1.5 border-2 border-theme-red rounded-md text-sm sm:text-base hover:bg-theme-red",onClick:function(){c(!1)},children:"Cancel"})]})]})})},p={ADD_TAGS:["iframe"],ADD_ATTR:["allow","allowfullscreen","frameborder","scrolling"]};t.a=function(e){var t=e.post,s=e.setPost,n=e.isPostDetail,r=e.toEdit,o=e.setToEdit;return Object(h.jsxs)("div",{className:"forum-post-body overflow-hidden mb-4 ".concat(n?"":"max-h-44 sm:max-h-52"),style:n?{}:{maskImage:"linear-gradient(180deg, #000 70%, transparent)",WebkitMaskImage:"linear-gradient(180deg, #000 70%, transparent)"},children:[n?Object(h.jsx)("div",{children:Object(h.jsx)("h3",{className:"text-lg sm:text-xl font-bold mb-3",children:t.title})}):Object(h.jsx)(c.b,{to:"/forums/".concat(t.id),className:"forum-post-body-title",onClick:function(){window.localStorage.setItem("gravityScrollPosition",window.pageYOffset)},children:Object(h.jsx)("h3",{className:"text-lg sm:text-xl font-bold mb-3",children:t.title})}),r?Object(h.jsx)(O,{post:t,setPost:s,setToEdit:o}):Object(h.jsx)("div",{className:"text-sm sm:text-base forum-post-body-content",dangerouslySetInnerHTML:{__html:a.a.sanitize(t.content,p)}})]})}},147:function(e,t,s){"use strict";s.r(t);var n=s(2),c=s.n(n),r=s(6),a=s(17),o=s(0),i=s.n(o),l=s(8),m=s(14),d=s(13),u=s(49),b=s(138),x=s(142),j=s(139),f=s(64),h=s(27),O=s(37),p=s(1),v=i.a.lazy((function(){return s.e(8).then(s.bind(null,145))}));t.default=function(){var e=Object(o.useState)(""),t=Object(a.a)(e,2),s=t[0],n=t[1],N=Object(o.useState)({}),g=Object(a.a)(N,2),w=g[0],k=g[1],y=Object(o.useState)(!1),C=Object(a.a)(y,2),P=C[0],E=C[1],T=Object(m.i)().id,S=Object(l.c)((function(e){return e})),z=S.currentUser,D=S.forums,B=Object(o.useRef)(0),A=Object(l.b)(),I=Object(m.g)();Object(o.useEffect)((function(){return Object(r.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==D.length&&D.find((function(e){return e.id===T}))||!(B.current<1)){e.next=6;break}return e.next=3,Object(O.d)(A);case 3:B.current+=1,e.next=8;break;case 6:(t=D.find((function(e){return e.id===T})))?k(t):I.replace("/404");case 8:case"end":return e.stop()}}),e)})))(),function(){return k({})}}),[A,D,T,I]),Object(o.useEffect)((function(){z.id&&Object(h.a)(A)}),[A,z.id]);var U=function(){var e=Object(r.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={content:s,level:0},e.next=3,Object(u.a)(A,w.id,z.token,t);case 3:n("");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return w&&w.id?Object(p.jsx)("div",{className:"mt-20 sm:mt-24 mb-16 mx-auto max-w-4xl bg-transparent border-2 sm:rounded-md shadow-md post-detail-container",children:Object(p.jsxs)("div",{className:"p-2 sm:p-4 post-detail-wrapper",children:[Object(p.jsx)(b.a,{post:w}),Object(p.jsx)(x.a,{post:w,setPost:k,isPostDetail:!0,toEdit:P,setToEdit:E}),Object(p.jsx)(j.a,{post:w,isPostDetail:!0,toEdit:P,setToEdit:E}),z.username&&Object(p.jsxs)("div",{className:"post-detail-add-comment mb-5",children:[Object(p.jsxs)("span",{className:"block text-sm mb-3 text-theme-gray",children:["Comment as",Object(p.jsx)(d.b,{className:"ml-1 underline",to:"/user/".concat(z.id),children:z.username})]}),Object(p.jsx)(f.a,{editorContent:s,setEditorContent:n,isPost:!1}),Object(p.jsx)("button",{type:"button",className:"mt-2 px-4 py-1 border-2 border-theme-green text-sm sm:text-base rounded-md hover:bg-theme-green hover:text-theme-white",onClick:U,children:"Comment"})]}),Object(p.jsx)("hr",{}),Object(p.jsx)("div",{className:"my-4 post-detail-comments",children:Object(p.jsx)(i.a.Suspense,{children:Object(p.jsx)(v,{post:w})})})]})}):null}}}]);
//# sourceMappingURL=7.387e3f83.chunk.js.map