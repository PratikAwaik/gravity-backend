(this["webpackJsonpgravity-frontend"]=this["webpackJsonpgravity-frontend"]||[]).push([[8],{140:function(e,t,n){"use strict";var s=n(2),r=n.n(s),c=n(6),o=(n(0),n(8)),i=n(13),a=n(7),m=n(50),l=n.n(m),u=n(49),d=n(1);t.a=function(e){var t=e.comment,n=e.setReplyClicked,s=e.setToEdit,m=Object(o.c)((function(e){return e.currentUser})),b=Object(o.b)(),x=Object(a.f)(m,t.id,"commentsUpvoted"),j=Object(a.e)(m,t.id,"commentsDownvoted"),f=function(){var e=Object(c.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={title:"Are you sure?",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, go back!",position:"center",icon:"warning",customClass:{confirmButton:"bg-theme-green text-theme-white border border-theme-green rounded-md",cancelButton:"bg-theme-gray, border border-theme-gray rounded-md"}},e.next=3,l.a.fire(n);case 3:if(!e.sent.isConfirmed){e.next=14;break}return e.prev=5,e.next=8,Object(u.b)(b,t.post,t.id,m.token);case 8:l.a.fire({icon:"success",title:"Comment deleted Successfully!",showConfirmButton:!1,timer:2e3}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),l.a.fire({icon:"error",title:e.t0,showConfirmButton:!1,timer:2e3});case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"ml-6 flex items-center comment-footer justify-between",children:[Object(d.jsxs)("div",{className:"flex items-center",children:[m.username?Object(d.jsxs)("div",{className:"mr-2 flex items-center ".concat(x?"text-theme-green":""," ").concat(!t.user&&"pointer-events-none"),children:[Object(d.jsx)("i",{className:"ri-rocket-2-".concat(x?"fill":"line"," cursor-pointer text-base sm:text-xl z-10"),onClick:function(){Object(a.d)(b,m,t,x,j)}}),Object(d.jsx)("span",{className:"text-base sm:text-xl",children:t.upvotes})]}):Object(d.jsxs)(i.b,{to:"/login",className:"mr-2 flex items-center",children:[Object(d.jsx)("i",{className:"ri-rocket-2-line cursor-pointer text-base sm:text-xl z-10"}),Object(d.jsx)("span",{className:"text-base sm:text-xl",children:t.upvotes})]}),m.username?Object(d.jsxs)("div",{className:"mr-4 flex items-center ".concat(j?"text-theme-red":""," ").concat(!t.user&&"pointer-events-none"),children:[Object(d.jsx)("i",{className:"ri-rocket-2-".concat(j?"fill":"line"," transform rotate-180 cursor-pointer text-base sm:text-xl z-10"),onClick:function(){Object(a.c)(b,m,t,x,j)}}),Object(d.jsx)("span",{className:"text-base sm:text-xl",children:t.downvotes})]}):Object(d.jsxs)(i.b,{to:"/login",className:"mr-4 flex items-center",children:[Object(d.jsx)("i",{className:"ri-rocket-2-line transform rotate-180 cursor-pointer text-base sm:text-xl z-10"}),Object(d.jsx)("span",{className:"text-base sm:text-xl",children:t.downvotes})]}),Object(d.jsxs)("div",{className:"mr-4 flex items-center cursor-pointer z-10 ".concat(!t.user&&"pointer-events-none"),onClick:function(){return n&&n(!0)},children:[Object(d.jsx)("i",{className:"ri-reply-line mr-1 text-base sm:text-xl"}),Object(d.jsx)("span",{className:"mr-1",children:"reply"})]})]}),t.user&&t.user.id===m.id&&Object(d.jsx)("div",{className:"flex items-center",children:Object(d.jsxs)("div",{className:"flex items-center mr-5",children:[Object(d.jsx)("button",{onClick:function(){return s&&s(!0)},className:"mr-3",children:Object(d.jsx)("i",{className:"ri-edit-2-line cursor-pointer text-base sm:text-xl z-10 text-theme-blue"})}),Object(d.jsx)("button",{onClick:function(){return s&&f()},children:Object(d.jsx)("i",{className:"ri-delete-bin-5-line cursor-pointer text-base sm:text-xl z-10 text-theme-red"})})]})})]})}},143:function(e,t,n){"use strict";var s=n(0),r=n(137),c=n.n(r),o=n(2),i=n.n(o),a=n(6),m=n(17),l=n(8),u=n(64),d=n(49),b=n(50),x=n.n(b),j=n(1),f=function(e){var t=e.comment,n=e.setToEdit,r=Object(s.useState)(t.content),c=Object(m.a)(r,2),o=c[0],b=c[1],f=Object(l.c)((function(e){return e.currentUser})),h=Object(l.b)(),O=function(){var e=Object(a.a)(i.a.mark((function e(s){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),r={content:o},e.next=4,Object(d.c)(h,t.post,t.id,r,f.token);case 4:return e.next=6,x.a.fire({title:"Comment updated Sucessfully!",icon:"success",customClass:{confirmButton:"bg-theme-green text-theme-white"}});case 6:e.sent.isConfirmed&&n(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"mt-5 create-post-container max-w-3xl mx-auto mb-5",children:Object(j.jsxs)("form",{onSubmit:O,children:[Object(j.jsx)(u.a,{editorContent:o,setEditorContent:b,isPost:!0}),Object(j.jsxs)("div",{className:"flex items-center mt-5",children:[Object(j.jsx)("button",{type:"submit",className:"px-2 py-1 border-2 border-theme-green rounded-md hover:bg-theme-green hover:text-theme-white",children:"Update"}),Object(j.jsx)("button",{type:"button",className:"ml-3 px-2 py-1 border-2 border-theme-red rounded-md hover:bg-theme-red",onClick:function(){n(!1)},children:"Cancel"})]})]})})};t.a=function(e){var t=e.comment,n=e.toEdit,s=e.setToEdit;return n?Object(j.jsx)(f,{comment:t,setToEdit:s}):Object(j.jsx)("div",{className:"mb-2 pl-8 text-sm sm:text-base comment-body",dangerouslySetInnerHTML:{__html:t.content?c.a.sanitize(t.content):"[deleted]"}})}},145:function(e,t,n){"use strict";n.r(t);var s=n(0),r=n(8),c=n(2),o=n.n(c),i=n(6),a=n(17),m=n(13),l=n(135),u=n.n(l),d=n(76),b=n(1),x=function(e){var t=e.comment;return Object(b.jsxs)("div",{className:"flex items-center text-sm text-theme-gray mb-2 z-10 comment-header",children:[Object(b.jsx)("img",{className:"w-6 h-6 sm:w-7 sm:h-7 rounded-full mr-2 object-cover",src:t.user?t.user.profilePic:d.a,alt:"User Profile Pic"}),t.user?Object(b.jsx)(m.b,{to:"/user/".concat(t.user.id),className:"mr-2 comment-user font-bold hover:underline",children:t.user.username}):Object(b.jsx)("div",{className:"mr-2 comment-user",children:"[deleted]"}),t.user&&t.user.posts.find((function(e){return e===t.post}))&&Object(b.jsx)("span",{className:"text-theme-green text-sm mr-2 font-bold",children:"OP"}),t.user&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"w-1 h-1 bg-theme-black rounded-full mr-2"}),Object(b.jsx)("span",{className:"comment-time",children:u()(t.createdAt).fromNow()})]}),t.editedAt&&Object(b.jsx)("span",{className:"ml-1",children:"(edited)"})]})},j=n(143),f=n(140),h=n(64),O=n(49),p=n(14),v=function(e){for(var t=e.comment,n=Object(s.useState)(!1),c=Object(a.a)(n,2),m=c[0],l=c[1],u=Object(s.useState)(!1),d=Object(a.a)(u,2),v=d[0],N=d[1],g=Object(s.useState)(""),y=Object(a.a)(g,2),w=y[0],C=y[1],k=Object(r.c)((function(e){return e.currentUser})),z=Object(r.b)(),E=Object(p.h)(),T=function(){var e=Object(i.a)(o.a.mark((function e(n){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),s={content:w.trim(),repliedTo:t.id,level:t.level+1},e.next=4,Object(O.a)(z,t.post,k.token,s);case 4:C(""),l(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=[],S=0;S<=t.level;S++)B.push(Object(b.jsx)("div",{className:"bg-theme-white absolute z-0 pt-2 w-0.5 bottom-0",style:{marginLeft:24*S+"px",height:S===t.level?"calc(100% - 50px)":"100%"}},S));return Object(b.jsxs)("div",{className:"w-full h-full flex items-center relative ".concat("#"+t.id===E.hash&&"rounded-md bg-yellow-100"),id:t.id,children:[Object(b.jsx)("div",{className:"absolute left-3 z-0 h-full flex items-center justify-between",children:B}),Object(b.jsxs)("div",{className:"flex flex-col pt-3 pb-2 w-full h-full relative comment",style:{paddingLeft:24*t.level+"px"},children:[Object(b.jsx)(x,{comment:t}),Object(b.jsx)(j.a,{comment:t,toEdit:v,setToEdit:N}),Object(b.jsx)(f.a,{comment:t,setReplyClicked:l,setToEdit:N}),m&&Object(b.jsxs)("div",{className:"my-2 sm:my-4 pl-6",children:[Object(b.jsx)(h.a,{editorContent:w,setEditorContent:C,isPost:!1}),Object(b.jsx)("button",{type:"button",className:"border-2 border-theme-green text-sm sm:text-base rounded-md px-2 py-1 my-2 hover:bg-theme-green hover:text-white",onClick:T,children:"Comment"}),Object(b.jsx)("button",{type:"button",className:"border-2 border-theme-red text-sm sm:text-base rounded-md px-2 py-1 my-2 hover:bg-theme-red hover:text-white ml-3",onClick:function(){return l(!1)},children:"Cancel"})]})]})]})},N=n(7);t.default=function(e){var t=e.post,n=Object(r.c)((function(e){return Object(N.g)(e.comments)})),c=Object(r.b)();return Object(s.useEffect)((function(){return Object(O.d)(c,t.id),function(){return Object(O.g)(c)}}),[c,t.id]),t?Object(b.jsx)("div",{children:n.map((function(e){return Object(b.jsx)(v,{comment:e},e.id)}))}):null}}}]);
//# sourceMappingURL=8.8788299f.chunk.js.map