(this["webpackJsonpgravity-frontend"]=this["webpackJsonpgravity-frontend"]||[]).push([[10],{136:function(e,t,s){"use strict";var c=s(0),a=s.n(c),r=s(33),n=s.n(r),i=s(1),o=a.a.lazy((function(){return Promise.all([s.e(0),s.e(1),s.e(6)]).then(s.bind(null,141))}));o.propTypes={posts:n.a.array.isRequired},t.a=function(e){var t=e.posts;return Object(i.jsx)("div",{className:"forums-post-wrapper",children:t.map((function(e){return Object(i.jsx)(a.a.Suspense,{children:Object(i.jsx)(o,{post:e})},e.id)}))})}},149:function(e,t,s){"use strict";s.r(t);var c=s(2),a=s.n(c),r=s(4),n=s(6),i=s(17),o=s(15),l=s.n(o),d=s(135),b=s.n(d),m=s(0),u=s(8),j=s(14),p=s(37),h=s(27),x=s(136),f=s(13),O=s(1),v=function(e){var t=e.members,s=e.label;return Object(O.jsxs)("div",{className:"my-4 px-2 sm:px-0 w-full",children:[Object(O.jsx)("h3",{className:"font-bold tab tab-selected ml-0 mb-3",children:s}),Object(O.jsx)("div",{className:"w-full overflow-x-auto overflow-y-hidden",children:Object(O.jsx)("div",{className:"flex items-center px-3 w-max",children:t.map((function(e){return Object(O.jsxs)(f.b,{to:"/user/".concat(e.id),className:"flex items-center mr-5",children:[Object(O.jsx)("img",{className:"w-7 h-7 rounded-full object-cover mr-2",src:e.profilePic,alt:"User Profile Pic"}),Object(O.jsx)("span",{className:"text-md hover:underline",children:e.prefixedName})]},e.id)}))})})]})},N=s(65),y=s(66),g=s(43);t.default=function(){var e=Object(m.useState)({}),t=Object(i.a)(e,2),s=t[0],c=t[1],o=Object(m.useState)(!0),d=Object(i.a)(o,2),f=d[0],w=d[1],k=Object(u.c)((function(e){return e})),I=k.forums,A=k.currentUser,P=Object(u.b)(),z=Object(j.i)(),C=Object(j.g)();Object(m.useEffect)((function(){Object(n.a)(a.a.mark((function e(){var t,s,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.get("".concat("https://gravityapi.herokuapp.com","/api/r/").concat(z.id));case 3:return t=e.sent,e.next=6,l.a.get("".concat("https://gravityapi.herokuapp.com","/api/r/").concat(z.id,"/posts"));case 6:return s=e.sent,e.next=9,l.a.get("".concat("https://gravityapi.herokuapp.com","/api/r/").concat(z.id,"/users"));case 9:n=e.sent,s.data.posts=s.data.posts.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{subreddit:t.data})})),t.data=Object(r.a)(Object(r.a)(Object(r.a)({},t.data),s.data),n.data),c(t.data),Object(p.g)(P,s.data.posts),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),C.replace("/404");case 19:w(!1);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})))()}),[z.id,P,C]);var J=function(){var e=Object(n.a)(a.a.mark((function e(t,c){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:"Bearer "+A.token}},e.next=3,l.a.patch("/api/r/".concat(s.id,"/update"),c,r);case 3:Object(g.c)(t,s.id,c.communityIcon);case 4:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),L=function(){var e=Object(n.a)(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:"Bearer "+A.token}},r=Object.assign({},s),n=!1,A.subscriptions.includes(s.id)?r.members=r.members.filter((function(e){return e.id!==A.id})):(n=!0,r.members=r.members.concat(A)),e.next=6,l.a.patch("/api/r/".concat(s.id,"/subscribe"),{subscribe:n},t);case 6:c(r),Object(h.e)(P,{subredditId:s.id,subscribe:n});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return f?Object(O.jsx)("div",{className:"w-screen h-screen flex items-center justify-center",children:Object(O.jsx)("img",{src:N.a,alt:"Loading Icon"})}):s.id?Object(O.jsxs)("div",{className:"w-full pb-20",children:[Object(O.jsx)("div",{className:"w-full absolute top-0 h-56",style:{backgroundColor:s.coverColor}}),Object(O.jsxs)("div",{className:"max-w-4xl mx-auto mt-44",children:[Object(O.jsxs)("div",{className:"flex items-center flex-col",children:[Object(O.jsx)("div",{className:"w-36 rounded-full z-10 bg-white",children:A.id&&A.moderating.includes(s.id)?Object(O.jsx)(y.a,{icon:s.communityIcon,dispatcher:J,objKey:"communityIcon"}):Object(O.jsx)("div",{className:"w-full h-full rounded-full mx-auto mb-5 border-4 border-theme-white flex items-center justify-center",children:Object(O.jsx)("img",{className:"w-32 h-32 rounded-full object-cover",src:s.communityIcon,alt:"Subreddit Icon"})})}),Object(O.jsx)("div",{className:"mb-4",children:Object(O.jsx)("span",{className:"text-2xl font-bold text-theme-gray",children:s.prefixedName})}),A.id?s.moderators.length<2&&A.moderating.includes(s.id)?null:Object(O.jsx)("button",{type:"button",className:"px-4 py-0.5 w-24 flex items-center justify-center text-md border-2 rounded-md border-gray-400 hover:bg-gray-200 group",onClick:L,children:A.subscriptions.includes(s.id)?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("span",{className:"group-hover:hidden",children:"Joined"}),Object(O.jsx)("span",{className:"hidden group-hover:inline-block",children:"Leave"})]}):"Join"}):null]}),Object(O.jsxs)("div",{className:"mt-4 mb-8 px-2",children:[Object(O.jsxs)("div",{className:"mb-4",children:[Object(O.jsx)("h3",{className:"font-bold mb-2 tab tab-selected ml-0",children:"About the Community"}),Object(O.jsxs)("div",{className:"px-3",children:[Object(O.jsxs)("p",{className:"font-bold my-2",children:["About:"," ",Object(O.jsx)("span",{className:"font-normal",children:s.description})]}),Object(O.jsxs)("p",{className:"font-bold my-2",children:["Established On:"," ",Object(O.jsx)("span",{className:"font-normal",children:b()(s.createdAt).format("LL")})]}),Object(O.jsxs)("p",{className:"font-bold my-2",children:["Members:"," ",Object(O.jsx)("span",{className:"font-normal",children:s.members.length})]})]})]}),Object(O.jsx)(v,{members:s.moderators,label:"Moderators"}),Object(O.jsx)(v,{members:s.members,label:"Members"})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("h3",{className:"font-bold tab tab-selected mb-3",children:"Posts"}),I.length>0?Object(O.jsx)(x.a,{posts:I}):Object(O.jsx)("span",{className:"text-2xl block text-center",children:"No posts yet..."})]})]})]}):null}}}]);
//# sourceMappingURL=10.6dc23621.chunk.js.map